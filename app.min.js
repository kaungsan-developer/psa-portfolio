const themeToggle = document.getElementById("theme-toggle"),
  prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)"),
  currentTheme =
    localStorage.getItem("theme") ||
    (prefersDarkScheme.matches ? "dark" : "light");
"dark" === currentTheme &&
  (document.documentElement.setAttribute("data-theme", "dark"),
  (themeToggle.innerHTML = '<i class="fa-regular fa-moon"></i>')),
  themeToggle.addEventListener("click", () => {
    let e = document.documentElement.getAttribute("data-theme"),
      t = "dark" === e ? "light" : "dark";
    document.documentElement.setAttribute("data-theme", t),
      localStorage.setItem("theme", t),
      (themeToggle.innerHTML =
        "dark" === t
          ? '<i class="fa-regular fa-moon"></i>'
          : '<i class="fa-regular fa-sun"></i>');
  }),
  prefersDarkScheme.addEventListener("change", (e) => {
    let t = e.matches ? "dark" : "light";
    document.documentElement.setAttribute("data-theme", t),
      localStorage.setItem("theme", t),
      (themeToggle.innerHTML =
        "dark" === t
          ? '<i class="fa-regular fa-moon"></i>'
          : '<i class="fa-regular fa-sun"></i>');
  });
